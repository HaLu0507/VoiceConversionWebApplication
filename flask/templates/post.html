<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link rel="stylesheet" href="/static/css/post.css">
        <title>音声変換</title>
        <script>
            //ファイルを選択するボタンを押したときの処理
            function OnButtonClick() {
                document.querySelector("#fileUp").click();
            }

            //ファイルが選択されたときの処理
            function inputChange(){
                let element = document.querySelector("#fileUp");
                document.querySelector("#filename").innerText = (element.files[0].name);
            }

        </script>
    </head>

    <body>
        <h1>AIを使って音声を変換しよう!!!</h1>
        
        <form method="post" action="/upload" enctype="multipart/form-data">
            
            <p>男性から女性に変換するか、女性から男性に変換するか選んでください</p>
            <label class = "pulldown">
                <select name="sel">
                    <option disabled selected>選択して下さい</option>
                    <option value="convertM2W">男性から女性に変換</option>
                    <option value="convertW2M">女性から男性に変換</option>
                </select>
            </label>

            <input type="button" id = "fileButton" value="ファイルを選択" onclick="OnButtonClick();"/>
            <p id="filename">ファイルが選択されていません</p>


            <input type="file" name="file" id="fileUp" accept="audio/*" onchange="inputChange()">
            
            <br>

            <input type="submit" value="アップロード" id = "submitButton">
            
        </form>        

        {% if boolean %}
            <p2 class="ok">
                <div class="play">
                    <h2>変換前</h2>
                    <audio src="/music/{{fileB}}" controls></audio>
                </div>

                <div class="play">
                    <h2>変換後</h2>
                    <audio src="/music/{{fileA}}" controls></audio>
                </div>
            </p2>
        {% else %}
            <p2 class="ng">
        {% endif %}

</html>